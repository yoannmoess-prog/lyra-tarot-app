/* Page */
.p5-page{ min-height:100svh; }
@supports (height:100dvh){ .p5-page{ min-height:100dvh; } }

.p5-content{
  padding: clamp(18px, 3vh, 28px) clamp(14px, 3.6vw, 26px) max(env(safe-area-inset-bottom), 24px);
}

/* Titre */
.p5-title{
  margin: 0 0 clamp(14px,2.6vh,20px) 0;
  text-align:center;
  font-family:'Sorts Mill Goudy', serif;
  color:#F8F5E1;
  font-size: clamp(1.4rem, 3vw, 2rem);
  line-height:1.25;
}

/* Cartes en ligne, responsives */
.p5-cards-rail{
  display:flex; justify-content:center; align-items:flex-start; gap: clamp(12px, 2.6vw, 24px);
  margin-bottom: clamp(16px, 3vh, 28px);
  flex-wrap: wrap;
}
.p5-card-outer{ width: clamp(96px, 22vw, 160px); aspect-ratio: 9/16; }
.p5-card{
  position:relative; width:100%; height:100%;
  border-radius:14px; box-shadow:0 8px 18px rgba(0,0,0,.35);
  display:flex; align-items:center; justify-content:center;
  background: rgba(15,15,15,.18);
  border: 1px solid rgba(248,245,225,.12);
}
.p5-front-placeholder{
  font-family:'Sorts Mill Goudy', serif;
  color:#F8F5E1; font-size: clamp(1.05rem, 2vw, 1.4rem); opacity:.95;
}
.p5-caption{
  margin-top: .35rem;
  text-align: center;
  color:#F8F5E1;
  font-family:'Sorts Mill Goudy', serif;
  opacity:.9;
  font-size: .95rem;
}

/* Chat column */
:root{
  --lyra1:#2a6aa1;   /* plus clair pour éviter le “trop foncé” */
  --lyra2:#327cb9;
  --lyraText:#ffffff;

  --user1:#3f5782;
  --user2:#3a5077;
  --userText:#f0f3f8;
}
.p5-chat-col{ max-width:820px; margin:0 auto; display:flex; flex-direction:column; gap: clamp(12px, 2vh, 16px); }

.chat{ display:flex; width:100%; opacity:0; transform: translateY(8px); transition: opacity .35s ease, transform .35s ease; }
.chat.show{ opacity:1; transform:none; }
.chat.show-late{ opacity:1; transform:none; transition-delay:.35s; }

.chat-in{ justify-content:flex-start; }
.chat-out{ justify-content:flex-end; }

.bubble{
  max-width:min(90%, 720px);
  padding: clamp(10px, 2.2vh, 14px) clamp(12px, 3.2vw, 16px);
  line-height:1.5; position:relative; text-align:left;
  box-shadow:0 6px 16px rgba(0,0,0,.28);
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  border:1px solid rgba(255,255,255,.06);
}

/* Noms */
.bubble-name{ font-weight:700; margin-bottom:.35rem; font-size:.95rem; opacity:.98; }

/* Lyra (gauche) */
.bubble-in{
  color: var(--lyraText);
  background: linear-gradient(180deg, var(--lyra1), var(--lyra2));
  border-top-left-radius:4px; border-top-right-radius:18px; border-bottom-right-radius:18px; border-bottom-left-radius:18px;
}

/* Vous (droite) */
.bubble-out{
  color: var(--userText);
  background: linear-gradient(180deg, var(--user1), var(--user2));
  border-top-left-radius:18px; border-top-right-radius:4px; border-bottom-right-radius:18px; border-bottom-left-radius:18px;
}

/* Champ de saisie dans la bulle utilisateur */
.msg-input{
  width: 100%;
  padding: .65rem .8rem;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.08);
  color: var(--userText);
  font: inherit;
  outline: none;
}
.msg-input::placeholder{ color: rgba(240,243,248,.8); }

.p5-endpad{ height: 12vh; }

@media (max-width:560px){
  .p5-card-outer{ width: clamp(96px, 30vw, 140px); }
  .bubble{ max-width:96%; }
}